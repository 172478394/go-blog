(function(t){function e(e){for(var r,o,s=e[0],u=e[1],c=e[2],h=0,d=[];h<s.length;h++)o=s[h],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);l&&l(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},i={app:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"19e7":function(t,e,n){},"50b8":function(t,e,n){"use strict";n("a9cf")},"56d7":function(t,e,n){"use strict";n.r(e);n("744f"),n("6c7b"),n("7514"),n("20d6"),n("1c4c"),n("6762"),n("cadf"),n("e804"),n("55dd"),n("d04f"),n("c8ce"),n("217b"),n("7f7f"),n("f400"),n("7f25"),n("536b"),n("d9ab"),n("f9ab"),n("32d7"),n("25c9"),n("9f3c"),n("042e"),n("c7c6"),n("f4ff"),n("049f"),n("7872"),n("a69f"),n("0b21"),n("6c1a"),n("c7c62"),n("84b4"),n("c5f6"),n("2e37"),n("fca0"),n("7cdf"),n("ee1d"),n("b1b1"),n("87f3"),n("9278"),n("5df2"),n("04ff"),n("f751"),n("4504"),n("fee7"),n("ffc1"),n("0d6d"),n("9986"),n("8e6e"),n("25db"),n("e4f7"),n("b9a1"),n("64d5"),n("9aea"),n("db97"),n("66c8"),n("57f0"),n("165b"),n("456d"),n("cf6a"),n("fd24"),n("8615"),n("551c"),n("097d"),n("df1b"),n("2397"),n("88ca"),n("ba16"),n("d185"),n("ebde"),n("2d34"),n("f6b3"),n("2251"),n("c698"),n("a19f"),n("9253"),n("9275"),n("3b2b"),n("3846"),n("4917"),n("a481"),n("28a5"),n("386d"),n("6b54"),n("4f7f"),n("8a81"),n("ac4d"),n("8449"),n("9c86"),n("fa83"),n("48c0"),n("a032"),n("aef6"),n("d263"),n("6c37"),n("9ec8"),n("5695"),n("2fdb"),n("d0b0"),n("5df3"),n("b54a"),n("f576"),n("ed50"),n("788d"),n("14b9"),n("f386"),n("f559"),n("1448"),n("673e"),n("242a"),n("c66f"),n("b05c"),n("34ef"),n("6aa2"),n("15ac"),n("af56"),n("b6e4"),n("9c29"),n("63d9"),n("4dda"),n("10ad"),n("c02b"),n("4795"),n("130f"),n("ac6a"),n("96cf");var r=n("2b0e"),i=n("ce5b"),a=n.n(i);n("bf40");r["default"].use(a.a,{});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"app"}},[n("v-navigation-drawer",{attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list",[n("v-list-tile",[n("v-list-tile-title",{staticClass:"title"},[t._v("\n          播放设置\n        ")])],1),t.pbEngineReady?n("PlaybackSidebar",{attrs:{playbackEngine:t.pbEngine}}):t._e()],1)],1),n("v-toolbar",{attrs:{app:""}},[n("v-toolbar-side-icon",{on:{click:function(e){t.drawer=!t.drawer}}}),n("v-spacer"),n("v-toolbar-title",[t._v(t._s(t.scoreTitle))]),n("v-spacer")],1),n("v-content",[n("v-container",{attrs:{fluid:"",title:"test"}},[t.mounted?n("Score",{attrs:{score:t.selectedScore,ready:t.pbEngineReady},on:{osmdInit:t.osmdInit,scoreLoaded:t.scoreLoaded}}):t._e()],1),n("PlaybackControls",{attrs:{playbackEngine:t.pbEngine,scoreTitle:t.scoreTitle}})],1)],1)},s=[],u=n("a34a"),c=n.n(u),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"playback-sidebar"},[n("div",{staticClass:"sidebar-content"},[t.playbackEngine.ready?n("div",[n("h2",[t._v("\n        节拍(BPM)\n        "+t._s(t.playbackEngine.denominator?"(1/"+t.playbackEngine.denominator+")":"")+"\n      ")]),n("BpmSlider",{attrs:{bpm:t.playbackEngine.playbackSettings.bpm,disabled:t.bpmDisabled},on:{"update:bpm":function(e){return t.playbackEngine.setBpm(e)}}}),n("h2",[t._v("等级")]),t._l(t.scoreInstruments,(function(e){return n("InstrumentControl",{key:e.Id,attrs:{playbackEngine:t.playbackEngine,instrument:e}})}))],2):n("div",[t._v("\n      Loading...\n    ")])])])},h=[],d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",[t._v(t._s(t.instrument.Name))]),t._l(t.instrument.Voices,(function(e,r){return n("div",{key:r},[n("h4",[t._v(t._s(e.Name))]),n("VolumeSlider",{attrs:{volume:e.Volume},on:{"update:volume":function(n){return t.$set(e,"Volume",n)}}})],1)}))],2)},f=[],p=function(){var t=this,e=this,n=e.$createElement,r=e._self._c||n;return r("v-flex",{attrs:{xs12:""}},[r("v-slider",{attrs:{value:e.volume,min:0,max:2,step:.05,"append-icon":"volume_up","prepend-icon":"volume_down"},on:{input:function(e){return t.$emit("update:volume",Number(e))}}})],1)},m=[],y={props:["volume"]},v=y,b=n("2877"),g=Object(b["a"])(v,p,m,!1,null,null,null),_=g.exports,k={components:{VolumeSlider:_},props:["instrument","playbackEngine"],computed:{instruments:function(){return this.playbackEngine.availableInstruments?this.playbackEngine.availableInstruments.map((function(t){return{text:t.name,value:t.midiId}})):[]}},methods:{setPlaybackInstrument:function(t,e){this.playbackEngine.setInstrument(t,e)}}},S=k,w=Object(b["a"])(S,d,f,!1,null,null,null),I=w.exports,x=function(){var t=this,e=this,n=e.$createElement,r=e._self._c||n;return r("v-flex",{attrs:{xs12:""}},[r("v-slider",{attrs:{value:e.bpm,min:0,max:200,step:1,disabled:e.disabled,"thumb-label":""},on:{input:function(e){return t.$emit("update:bpm",Number(e))}}})],1)},T=[],P={props:["bpm","disabled"]},E=P,A=Object(b["a"])(E,x,T,!1,null,null,null),O=A.exports,C={components:{InstrumentControl:I,BpmSlider:O},props:{playbackEngine:Object},data:function(){return{}},computed:{scoreInstruments:function(){return this.playbackEngine.scoreInstruments},bpmDisabled:function(){return"PLAYING"===this.playbackEngine.state}}},N=C,j=(n("b1a1"),Object(b["a"])(N,l,h,!1,null,null,null)),L=j.exports,B=function(){var t=this,e=this,n=e.$createElement,r=e._self._c||n;return r("div",{staticClass:"text-xs-center"},[r("v-bottom-sheet",{staticStyle:{"max-width":"500px"},attrs:{inset:"",persistent:!0,"hide-overlay":!0,value:!0}},[r("v-card",{attrs:{tile:""}},[r("v-list",{staticClass:"blue lighten-5"},[this.playbackEngine&&this.playbackEngine.iterationSteps>0?r("v-slider",{staticClass:"progress-slider",attrs:{value:this.playbackEngine.currentIterationStep,min:0,max:this.playbackEngine.iterationSteps,step:1},on:{input:function(e){return t.playbackEngine.jumpToStep(e)}}}):e._e(),r("v-list-tile",[r("v-list-tile-content",[r("v-list-tile-title",[e._v(e._s(e.scoreTitle))]),r("v-list-tile-sub-title")],1),r("v-list-tile-action",{class:{"mr-2":e.$vuetify.breakpoint.mdAndUp}},["PLAYING"!==e.playbackEngine.state?r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.playbackEngine.play()}}},[r("v-icon",{attrs:{dark:""}},[e._v("play_arrow")])],1):r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.playbackEngine.pause()}}},[r("v-icon",{attrs:{dark:""}},[e._v("pause")])],1)],1),r("v-list-tile-action",[r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.playbackEngine.stop()}}},[r("v-icon",{attrs:{dark:""}},[e._v("stop")])],1)],1)],1)],1)],1)],1)],1)},M=[],D={props:{playbackEngine:Object,scoreTitle:String}},V=D,G=(n("d155"),Object(b["a"])(V,B,M,!1,null,null,null)),F=G.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.scoreLoading||!t.ready?n("div",{staticClass:"score-progress"},[n("v-progress-circular",{attrs:{size:60,color:"primary",indeterminate:""}})],1):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.scoreLoading,expression:"!scoreLoading"}],ref:"scorediv",staticClass:"score",style:{opacity:t.ready?100:0}})])},R=[],$=n("2938");function Q(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function U(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Q(a,r,i,o,s,"next",t)}function s(t){Q(a,r,i,o,s,"throw",t)}o(void 0)}))}}var z={props:["score","ready"],data:function(){return{osmd:null,scoreLoading:!1}},watch:{score:function(t,e){t&&t!==e&&this.loadScore(t)}},mounted:function(){var t=U(c.a.mark((function t(){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.osmd=new $["OpenSheetMusicDisplay"](this.$refs.scorediv,{followCursor:!0,autoResize:!1}),this.$emit("osmdInit",this.osmd),this.score&&this.loadScore(this.score);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{loadScore:function(){var t=U(c.a.mark((function t(e){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.scoreLoading=!0,t.next=3,this.osmd.load(e);case 3:return this.scoreLoading=!1,t.next=6,this.$nextTick();case 6:return t.next=8,this.osmd.render();case 8:this.$emit("scoreLoaded");case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},X=z,J=(n("50b8"),n("dbf1"),Object(b["a"])(X,H,R,!1,null,"79538c9c",null)),W=J.exports,Y=[{value:"https://opensheetmusicdisplay.github.io/demo/sheets/Beethoven_AnDieFerneGeliebte.xml",text:"Beethoven, L.v. - An die ferne Geliebte"},{value:"score.xml",text:"Herren är min herde god"},{value:"https://opensheetmusicdisplay.github.io/demo/sheets/MuzioClementi_SonatinaOpus36No3_Part1.xml",text:"Clementi, M. - Sonatina Op.36 No.3 Pt.1"},{value:"https://opensheetmusicdisplay.github.io/demo/sheets/MuzioClementi_SonatinaOpus36No3_Part2.xml",text:"Clementi, M. - Sonatina Op.36 No.3 Pt.2"},{value:"https://opensheetmusicdisplay.github.io/demo/sheets/JohannSebastianBach_PraeludiumInCDur_BWV846_1.xml",text:"Bach, J.S. - Praeludium in C-Dur BWV846 1"},{value:"https://opensheetmusicdisplay.github.io/demo/sheets/ScottJoplin_EliteSyncopations.xml",text:"Joplin, S. - Elite Syncopations"},{value:"https://opensheetmusicdisplay.github.io/demo/sheets/ScottJoplin_The_Entertainer.xml",text:"Joplin, S. - The Entertainer"},{value:"https://opensheetmusicdisplay.github.io/demo/sheets/Land_der_Berge.musicxml",text:"Mozart/Holzer - Land der Berge (national anthem of Austria)"},{value:"https://opensheetmusicdisplay.github.io/demo/sheets/Schubert_An_die_Musik.xml",text:"Schubert, F. - An Die Musik"},{value:"https://opensheetmusicdisplay.github.io/demo/sheets/Dichterliebe01.xml",text:"Schumann, R. - Dichterliebe"},{value:"https://opensheetmusicdisplay.github.io/demo/sheets/TelemannWV40.102_Sonate-Nr.1.1-Dolce.xml",text:"Telemann, G.P. - Sonate-Nr.1.1-Dolce"},{value:"https://opensheetmusicdisplay.github.io/demo/sheets/TelemannWV40.102_Sonate-Nr.1.2-Allegro-F-Dur.xml",text:"Telemann, G.P. - Sonate-Nr.1.2-Allegro"}];function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Z(t,e,n){return e&&K(t.prototype,e),n&&K(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var tt=function(t){function e(){q(this,e),this.steps=[]}return Z(e,[{key:t,value:function(){return this.steps.values()}},{key:"createStep",value:function(t){var e=this.steps.find((function(e){return Math.abs(e.tick-t)<.001}));return e||(e={tick:t,notes:[]},this.steps.push(e)),e}},{key:"addNote",value:function(t,e){var n,r=(n=this.steps.find((function(e){return Math.abs(e.tick-t)<.001})),null!==n&&void 0!==n?n:this.createStep(t));r.notes.push(e)}},{key:"delete",value:function(t){var e=this.steps.findIndex((function(e){return e.tick===t.tick}));null!=e&&this.steps.splice(e,1)}},{key:"sort",value:function(){return this.steps.sort((function(t,e){return t.tick-e.tick})),this}},{key:"getFirstEmptyTick",value:function(){return this.sort().steps.filter((function(t){return!t.notes.length}))[0].tick}}]),e}(Symbol.iterator);function et(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=nt(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function nt(t,e){if(t){if("string"===typeof t)return rt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rt(t,e):void 0}}function rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function it(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ot(t,e,n){return e&&at(t.prototype,e),n&&at(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var st,ut=function(){function t(e,n,r){it(this,t),this.stepQueue=new tt,this.stepQueueIndex=0,this.scheduledTicks=new Set,this.currentTick=0,this.currentTickTimestamp=0,this.audioContextStartTime=0,this.schedulerIntervalHandle=null,this.scheduleInterval=200,this.schedulePeriod=500,this.tickDenominator=1024,this.lastTickOffset=300,this.playing=!1,this.noteSchedulingCallback=r,this.wholeNoteLength=e,this.audioContext=n}return ot(t,[{key:"schedulePeriodTicks",get:function(){return this.schedulePeriod/this.tickDuration}},{key:"audioContextTime",get:function(){return this.audioContext?1e3*(this.audioContext.currentTime-this.audioContextStartTime):0}},{key:"tickDuration",get:function(){return this.wholeNoteLength/this.tickDenominator}},{key:"calculatedTick",get:function(){return this.currentTick+Math.round((this.audioContextTime-this.currentTickTimestamp)/this.tickDuration)}},{key:"start",value:function(){var t=this;this.playing=!0,this.stepQueue.sort(),this.audioContextStartTime=this.audioContext.currentTime,this.currentTickTimestamp=this.audioContextTime,this.schedulerIntervalHandle||(this.schedulerIntervalHandle=window.setInterval((function(){return t.scheduleIterationStep()}),this.scheduleInterval))}},{key:"setIterationStep",value:function(t){t=Math.min(this.stepQueue.steps.length-1,t),this.stepQueueIndex=t,this.currentTick=this.stepQueue.steps[this.stepQueueIndex].tick}},{key:"pause",value:function(){this.playing=!1}},{key:"resume",value:function(){this.playing=!0,this.currentTickTimestamp=this.audioContextTime}},{key:"reset",value:function(){this.playing=!1,this.currentTick=0,this.currentTickTimestamp=0,this.stepQueueIndex=0,clearInterval(this.scheduleInterval),this.schedulerIntervalHandle=null}},{key:"loadNotes",value:function(t){var e=this.lastTickOffset;this.stepQueue.steps.length>0&&(e=this.stepQueue.getFirstEmptyTick());var n,r=et(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.IsGrace){var a,o=et(i.Notes);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.stepQueue.addNote(e,s),this.stepQueue.createStep(e+s.Length.RealValue*this.tickDenominator)}}catch(u){o.e(u)}finally{o.f()}}}}catch(u){r.e(u)}finally{r.f()}}},{key:"scheduleIterationStep",value:function(){var t,e;if(this.playing){this.currentTick=this.calculatedTick,this.currentTickTimestamp=this.audioContextTime;var n=null===(t=this.stepQueue.steps[this.stepQueueIndex])||void 0===t?void 0:t.tick;if(n){while(this.nextTickAvailableAndWithinSchedulePeriod(n)){var r=this.stepQueue.steps[this.stepQueueIndex],i=(r.tick-this.currentTick)*this.tickDuration;i<0&&(i=0),this.scheduledTicks.add(r.tick),this.noteSchedulingCallback(i/1e3,r.notes),this.stepQueueIndex++,n=null===(e=this.stepQueue.steps[this.stepQueueIndex])||void 0===e?void 0:e.tick}var a,o=et(this.scheduledTicks);try{for(o.s();!(a=o.n()).done;){var s=a.value;s<=this.currentTick&&this.scheduledTicks.delete(s)}}catch(u){o.e(u)}finally{o.f()}}else this.reset()}}},{key:"nextTickAvailableAndWithinSchedulePeriod",value:function(t){return t&&this.currentTickTimestamp+(t-this.currentTick)*this.tickDuration<=this.currentTickTimestamp+this.schedulePeriod}}]),t}();(function(t){t[t["None"]=0]="None",t[t["Staccato"]=1]="Staccato",t[t["Legato"]=2]="Legato"})(st||(st={}));var ct=[[0,"Acoustic Grand Piano"],[1,"Bright Acoustic Piano"],[2,"Electric Grand Piano"],[3,"Honky-tonk Piano"],[4,"Electric Piano 1"],[5,"Electric Piano 2"],[6,"Harpsichord"],[7,"Clavi"],[8,"Celesta"],[9,"Glockenspiel"],[10,"Music Box"],[11,"Vibraphone"],[12,"Marimba"],[13,"Xylophone"],[14,"Tubular Bells"],[15,"Dulcimer"],[16,"Drawbar Organ"],[17,"Percussive Organ"],[18,"Rock Organ"],[19,"Church Organ"],[20,"Reed Organ"],[21,"Accordion"],[22,"Harmonica"],[23,"Tango Accordion"],[24,"Acoustic Guitar (nylon)"],[25,"Acoustic Guitar (steel)"],[26,"Electric Guitar (jazz)"],[27,"Electric Guitar (clean)"],[28,"Electric Guitar (muted)"],[29,"Overdriven Guitar"],[30,"Distortion Guitar"],[31,"Guitar harmonics"],[32,"Acoustic Bass"],[33,"Electric Bass (finger)"],[34,"Electric Bass (pick)"],[35,"Fretless Bass"],[36,"Slap Bass 1"],[37,"Slap Bass 2"],[38,"Synth Bass 1"],[39,"Synth Bass 2"],[40,"Violin"],[41,"Viola"],[42,"Cello"],[43,"Contrabass"],[44,"Tremolo Strings"],[45,"Pizzicato Strings"],[46,"Orchestral Harp"],[47,"Timpani"],[48,"String Ensemble 1"],[49,"String Ensemble 2"],[50,"SynthStrings 1"],[51,"SynthStrings 2"],[52,"Choir Aahs"],[53,"Voice Oohs"],[54,"Synth Choir"],[55,"Orchestra Hit"],[56,"Trumpet"],[57,"Trombone"],[58,"Tuba"],[59,"Muted Trumpet"],[60,"French Horn"],[61,"Brass Section"],[62,"SynthBrass 1"],[63,"SynthBrass 2"],[64,"Soprano Sax"],[65,"Alto Sax"],[66,"Tenor Sax"],[67,"Baritone Sax"],[68,"Oboe"],[69,"English Horn"],[70,"Bassoon"],[71,"Clarinet"],[72,"Piccolo"],[73,"Flute"],[74,"Recorder"],[75,"Pan Flute"],[76,"Blown Bottle"],[77,"Shakuhachi"],[78,"Whistle"],[79,"Ocarina"],[80,"Lead 1 (square)"],[81,"Lead 2 (sawtooth)"],[82,"Lead 3 (calliope)"],[83,"Lead 4 (chiff)"],[84,"Lead 5 (charang)"],[85,"Lead 6 (voice)"],[86,"Lead 7 (fifths)"],[87,"Lead 8 (bass + lead)"],[88,"Pad 1 (new age)"],[89,"Pad 2 (warm)"],[90,"Pad 3 (polysynth)"],[91,"Pad 4 (choir)"],[92,"Pad 5 (bowed)"],[93,"Pad 6 (metallic)"],[94,"Pad 7 (halo)"],[95,"Pad 8 (sweep)"],[96,"FX 1 (rain)"],[97,"FX 2 (soundtrack)"],[98,"FX 3 (crystal)"],[99,"FX 4 (atmosphere)"],[100,"FX 5 (brightness)"],[101,"FX 6 (goblins)"],[102,"FX 7 (echoes)"],[103,"FX 8 (sci-fi)"],[104,"Sitar"],[105,"Banjo"],[106,"Shamisen"],[107,"Koto"],[108,"Kalimba"],[109,"Bag pipe"],[110,"Fiddle"],[111,"Shanai"],[112,"Tinkle Bell"],[113,"Agogo"],[114,"Steel Drums"],[115,"Woodblock"],[116,"Taiko Drum"],[117,"Melodic Tom"],[118,"Synth Drum"],[119,"Reverse Cymbal"],[120,"Guitar Fret Noise"],[121,"Breath Noise"],[122,"Seashore"],[123,"Bird Tweet"],[124,"Telephone Ring"],[125,"Helicopter"],[126,"Applause"],[127,"Gunshot"]],lt=["accordion","acoustic_bass","acoustic_grand_piano","acoustic_guitar_nylon","acoustic_guitar_steel","agogo","alto_sax","applause","bagpipe","banjo","baritone_sax","bassoon","bird_tweet","blown_bottle","brass_section","breath_noise","bright_acoustic_piano","celesta","cello","choir_aahs","church_organ","clarinet","clavinet","contrabass","distortion_guitar","drawbar_organ","dulcimer","electric_bass_finger","electric_bass_pick","electric_grand_piano","electric_guitar_clean","electric_guitar_jazz","electric_guitar_muted","electric_piano_1","electric_piano_2","english_horn","fiddle","flute","french_horn","fretless_bass","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_scifi","glockenspiel","guitar_fret_noise","guitar_harmonics","gunshot","harmonica","harpsichord","helicopter","honkytonk_piano","kalimba","koto","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass__lead","marimba","melodic_tom","music_box","muted_trumpet","oboe","ocarina","orchestra_hit","orchestral_harp","overdriven_guitar","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","pan_flute","percussive_organ","piccolo","pizzicato_strings","recorder","reed_organ","reverse_cymbal","rock_organ","seashore","shakuhachi","shamisen","shanai","sitar","slap_bass_1","slap_bass_2","soprano_sax","steel_drums","string_ensemble_1","string_ensemble_2","synth_bass_1","synth_bass_2","synth_brass_1","synth_brass_2","synth_choir","synth_drum","synth_strings_1","synth_strings_2","taiko_drum","tango_accordion","telephone_ring","tenor_sax","timpani","tinkle_bell","tremolo_strings","trombone","trumpet","tuba","tubular_bells","vibraphone","viola","violin","voice_oohs","whistle","woodblock","xylophone"],ht=n("9dfd");function dt(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ft(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function ft(t,e){if(t){if("string"===typeof t)return pt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pt(t,e):void 0}}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vt(t,e,n){return e&&yt(t.prototype,e),n&&yt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var bt=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function o(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r["throw"](t))}catch(e){a(e)}}function u(t){t.done?n(t.value):i(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},gt=function(){function t(){var e=this;mt(this,t),this.players=new Map,this.instruments=ct.filter((function(t){return lt.includes(e.getSoundfontInstrumentName(t[1]))})).map((function(t){return{midiId:t[0],name:t[1],loaded:!1}}))}return vt(t,[{key:"init",value:function(t){this.audioContext=t}},{key:"load",value:function(t){return bt(this,void 0,void 0,c.a.mark((function e(){var n,r;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.instruments.find((function(e){return e.midiId===t})),n){e.next=3;break}throw new Error("SoundfontPlayer does not support midi instrument ID "+t);case 3:if(!this.players.has(t)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,ht["instrument"](this.audioContext,this.getSoundfontInstrumentName(n.name));case 7:r=e.sent,this.players.set(t,r);case 9:case"end":return e.stop()}}),e,this)})))}},{key:"stop",value:function(t){this.players.has(t)&&this.players.get(t).stop()}},{key:"schedule",value:function(t,e,n){this.verifyPlayerLoaded(t),this.applyDynamics(n),this.players.get(t).schedule(e,n)}},{key:"applyDynamics",value:function(t){var e,n=dt(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.articulation===st.Staccato&&(r.gain=Math.max(r.gain+.3,1.3*r.gain),r.duration=Math.min(.4*r.duration,.4))}}catch(i){n.e(i)}finally{n.f()}}},{key:"verifyPlayerLoaded",value:function(t){if(!this.players.has(t))throw new Error("No soundfont player loaded for midi instrument "+t)}},{key:"getSoundfontInstrumentName",value:function(t){return t.toLowerCase().replace(/\s+/g,"_")}}]),t}();function _t(t){return t.ParentVoiceEntry.isStaccato()?st.Staccato:st.None}function kt(t,e){var n=t.Length.RealValue*e;return t.NoteTie&&(Object.is(t.NoteTie.StartNote,t)&&t.NoteTie.Notes[1]?n+=t.NoteTie.Notes[1].Length.RealValue*e:n=0),n}function St(t){return t.ParentVoiceEntry.ParentVoice.Volume}function wt(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=It(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function It(t,e){if(t){if("string"===typeof t)return xt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xt(t,e):void 0}}function xt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Et(t,e,n){return e&&Pt(t.prototype,e),n&&Pt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var At=function(){function t(){Tt(this,t),this.subscribers=new Map}return Et(t,[{key:"on",value:function(t,e){this.subscribers.get(t)||this.subscribers.set(t,[]),this.subscribers.get(t).push(e)}},{key:"emit",value:function(t){for(var e=this.subscribers.get(t)||[],n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a,o=wt(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.apply(void 0,r)}}catch(u){o.e(u)}finally{o.f()}}}]),t}(),Ot=n("140e");function Ct(t,e){return Lt(t)||jt(t,e)||Mt(t,e)||Nt()}function Nt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jt(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done);o=!0)if(a.push(r.value),e&&a.length===e)break}catch(u){s=!0,i=u}finally{try{o||null==n["return"]||n["return"]()}finally{if(s)throw i}}return a}}function Lt(t){if(Array.isArray(t))return t}function Bt(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Mt(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Mt(t,e){if(t){if("string"===typeof t)return Dt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(t,e):void 0}}function Dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ft(t,e,n){return e&&Gt(t.prototype,e),n&&Gt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Ht,Rt,$t=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function o(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r["throw"](t))}catch(e){a(e)}}function u(t){t.done?n(t.value):i(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))};(function(t){t["INIT"]="INIT",t["PLAYING"]="PLAYING",t["STOPPED"]="STOPPED",t["PAUSED"]="PAUSED"})(Ht||(Ht={})),function(t){t["STATE_CHANGE"]="state-change",t["ITERATION"]="iteration"}(Rt||(Rt={}));var Qt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ot["AudioContext"],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gt;Vt(this,t),this.defaultBpm=100,this.scoreInstruments=[],this.ready=!1,this.ac=e,this.ac.suspend(),this.instrumentPlayer=n,this.instrumentPlayer.init(this.ac),this.availableInstruments=this.instrumentPlayer.instruments,this.events=new At,this.cursor=null,this.sheet=null,this.scheduler=null,this.iterationSteps=0,this.currentIterationStep=0,this.timeoutHandles=[],this.playbackSettings={bpm:this.defaultBpm,masterVolume:1},this.setState(Ht.INIT)}return Ft(t,[{key:"wholeNoteLength",get:function(){return Math.round(60/this.playbackSettings.bpm*4e3)}},{key:"getPlaybackInstrument",value:function(t){if(!this.sheet)return null;var e=this.sheet.Instruments.flatMap((function(t){return t.Voices})).find((function(e){return e.VoiceId===t}));return this.availableInstruments.find((function(t){return t.midiId===e.midiInstrumentId}))}},{key:"setInstrument",value:function(t,e){return $t(this,void 0,void 0,c.a.mark((function n(){return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,this.instrumentPlayer.load(e);case 2:t.midiInstrumentId=e;case 3:case"end":return n.stop()}}),n,this)})))}},{key:"loadScore",value:function(t){return $t(this,void 0,void 0,c.a.mark((function e(){var n=this;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.ready=!1,this.sheet=t.Sheet,this.scoreInstruments=this.sheet.Instruments,this.cursor=t.cursor,this.sheet.HasBPMInfo&&this.setBpm(this.sheet.DefaultStartTempoInBpm),e.next=7,this.loadInstruments();case 7:this.initInstruments(),this.scheduler=new ut(this.wholeNoteLength,this.ac,(function(t,e){return n.notePlaybackCallback(t,e)})),this.countAndSetIterationSteps(),this.ready=!0,this.setState(Ht.STOPPED);case 12:case"end":return e.stop()}}),e,this)})))}},{key:"initInstruments",value:function(){var t,e=Bt(this.sheet.Instruments);try{for(e.s();!(t=e.n()).done;){var n,r=t.value,i=Bt(r.Voices);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.midiInstrumentId=r.MidiInstrumentId}}catch(o){i.e(o)}finally{i.f()}}}catch(o){e.e(o)}finally{e.f()}}},{key:"loadInstruments",value:function(){return $t(this,void 0,void 0,c.a.mark((function t(){var e,n,r,i,a=this;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=[],n=Bt(this.sheet.Instruments);try{for(i=function(){var t=r.value,n=a.availableInstruments.find((function(e){return e.midiId===t.MidiInstrumentId}));null==n&&a.fallbackToPiano(t),e.push(a.instrumentPlayer.load(t.MidiInstrumentId))},n.s();!(r=n.n()).done;)i()}catch(o){n.e(o)}finally{n.f()}return t.next=5,Promise.all(e);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"fallbackToPiano",value:function(t){if(console.warn("Can't find playback instrument for midiInstrumentId ".concat(t.MidiInstrumentId,". Falling back to piano")),t.MidiInstrumentId=0,null==this.availableInstruments.find((function(t){return 0===t.midiId})))throw new Error("Piano fallback failed, grand piano not supported")}},{key:"play",value:function(){return $t(this,void 0,void 0,c.a.mark((function t(){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.ac.resume();case 2:this.state!==Ht.INIT&&this.state!==Ht.STOPPED||this.cursor.show(),this.setState(Ht.PLAYING),this.scheduler.start();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"stop",value:function(){return $t(this,void 0,void 0,c.a.mark((function t(){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.setState(Ht.STOPPED),this.stopPlayers(),this.clearTimeouts(),this.scheduler.reset(),this.cursor.reset(),this.currentIterationStep=0,this.cursor.hide();case 7:case"end":return t.stop()}}),t,this)})))}},{key:"pause",value:function(){this.setState(Ht.PAUSED),this.ac.suspend(),this.stopPlayers(),this.scheduler.setIterationStep(this.currentIterationStep),this.scheduler.pause(),this.clearTimeouts()}},{key:"jumpToStep",value:function(t){this.pause(),this.currentIterationStep>t&&(this.cursor.reset(),this.currentIterationStep=0);while(this.currentIterationStep<t)this.cursor.next(),++this.currentIterationStep;var e=this.currentIterationStep;this.currentIterationStep>0&&this.currentIterationStep<this.iterationSteps&&++e,this.scheduler.setIterationStep(e)}},{key:"setBpm",value:function(t){this.playbackSettings.bpm=t,this.scheduler&&(this.scheduler.wholeNoteLength=this.wholeNoteLength)}},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"countAndSetIterationSteps",value:function(){this.cursor.reset();var t=0;while(!this.cursor.Iterator.EndReached)this.cursor.Iterator.CurrentVoiceEntries&&this.scheduler.loadNotes(this.cursor.Iterator.CurrentVoiceEntries),this.cursor.next(),++t;this.iterationSteps=t,this.cursor.reset()}},{key:"notePlaybackCallback",value:function(t,e){var n=this;if(this.state===Ht.PLAYING){var r,i=new Map,a=Bt(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(!o.isRest()){var s=kt(o,this.wholeNoteLength);if(0!==s){var u=St(o),c=_t(o),l=o.ParentVoiceEntry.ParentVoice.midiInstrumentId,h=o.ParentVoiceEntry.ParentVoice.Parent.SubInstruments[0].fixedKey||0;i.has(l)||i.set(l,[]),i.get(l).push({note:o.halfTone-12*h,duration:s/1e3,gain:u,articulation:c})}}}}catch(v){a.e(v)}finally{a.f()}var d,f=Bt(i);try{for(f.s();!(d=f.n()).done;){var p=Ct(d.value,2),m=p[0],y=p[1];this.instrumentPlayer.schedule(m,this.ac.currentTime+t,y)}}catch(v){f.e(v)}finally{f.f()}this.timeoutHandles.push(window.setTimeout((function(){return n.iterationCallback()}),Math.max(0,1e3*t-35)),window.setTimeout((function(){return n.events.emit(Rt.ITERATION,e)}),1e3*t))}}},{key:"setState",value:function(t){this.state=t,this.events.emit(Rt.STATE_CHANGE,t)}},{key:"stopPlayers",value:function(){var t,e=Bt(this.sheet.Instruments);try{for(e.s();!(t=e.n()).done;){var n,r=t.value,i=Bt(r.Voices);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.instrumentPlayer.stop(a.midiInstrumentId)}}catch(o){i.e(o)}finally{i.f()}}}catch(o){e.e(o)}finally{e.f()}}},{key:"clearTimeouts",value:function(){var t,e=Bt(this.timeoutHandles);try{for(e.s();!(t=e.n()).done;){var n=t.value;clearTimeout(n)}}catch(r){e.e(r)}finally{e.f()}this.timeoutHandles=[]}},{key:"iterationCallback",value:function(){this.state===Ht.PLAYING&&(this.currentIterationStep>0&&this.cursor.next(),++this.currentIterationStep)}}]),t}();function Ut(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function zt(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Ut(a,r,i,o,s,"next",t)}function s(t){Ut(a,r,i,o,s,"throw",t)}o(void 0)}))}}var Xt={name:"app",components:{osmd:null,Score:W,PlaybackSidebar:L,PlaybackControls:F},data:function(){return{pbEngine:new Qt,pbEngineReady:!1,scores:Y,selectedScore:null,osmd:null,scoreTitle:"",drawer:!1,mounted:!1}},computed:{},methods:{osmdInit:function(t){console.log("OSMD init"),this.osmd=t,this.selectedScore=window.mxl},scoreLoaded:function(){var t=zt(c.a.mark((function t(){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Score loaded"),this.osmd.sheet.title&&(this.scoreTitle=this.osmd.sheet.title.text),t.next=4,this.pbEngine.loadScore(this.osmd);case 4:console.log("pbEngine ready"),this.pbEngineReady=!0;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),scoreChanged:function(t){"PLAYING"===this.pbEngine.state&&this.pbEngine.stop(),this.selectedScore=t,this.pbEngineReady=!1}},mounted:function(){var t=this;setTimeout((function(){t.mounted=!0}),200)}},Jt=Xt,Wt=(n("5c0b"),Object(b["a"])(Jt,o,s,!1,null,null,null)),Yt=Wt.exports;r["default"].use(a.a),r["default"].config.productionTip=!1,new r["default"]({render:function(t){return t(Yt)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";n("e332")},"9dfd":function(t,e,n){"use strict";(function(t){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}var r=n("ab19"),i=n("3b96");function a(t,e,n){if(1===arguments.length)return function(e,n){return a(t,e,n)};var u=n||{},c=u.isSoundfontURL||o,l=u.nameToUrl||s,h=c(e)?e:l(e,u.soundfont,u.format);return r(t,h,{only:u.only||u.notes}).then((function(n){var r=i(t,n,u).connect(u.destination?u.destination:t.destination);return r.url=h,r.name=e,r}))}function o(t){return/\.js(\?.*)?$/i.test(t)}function s(t,e,n){var r="https://cdn.jsdelivr.net/gh/172478394/midi-js-soundfonts/";return n="ogg"===n?n:"mp3",e="FluidR3_GM"===e?e:"MusyngKite",r+e+"/"+t+"-"+n+".js"}var u=n("da24");u.instrument=a,u.nameToUrl=s,"object"===e(t)&&t.exports&&(t.exports=u),"undefined"!==typeof window&&(window.Soundfont=u)}).call(this,n("62e4")(t))},a9cf:function(t,e,n){},aaab:function(t,e,n){},b1a1:function(t,e,n){"use strict";n("dec8")},d155:function(t,e,n){"use strict";n("aaab")},da24:function(t,e,n){"use strict";var r=n("1c15");function i(t,e){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof i))return new i(t);this.nameToUrl=e||i.nameToUrl,this.ctx=t,this.instruments={},this.promises=[]}function a(t,e,n){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),i.instrument(t,e,n).then((function(t){return t.buffers}))}function o(t,e){return e=e||{},function(n,i,a,o){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var s=n>0&&n<129?+n:r.midi(n),u=s?r.midiToFreq(s,440):null;if(u){a=a||.2,o=o||{};var c=o.destination||e.destination||t.destination,l=o.vcoType||e.vcoType||"sine",h=o.gain||e.gain||.4,d=t.createOscillator();d.type=l,d.frequency.value=u;var f=t.createGain();return f.gain.value=h,d.connect(f),f.connect(c),d.start(i),a>0&&d.stop(i+a),d}}}i.prototype.onready=function(t){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(t)},i.prototype.instrument=function(t,e){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var n=this.ctx;if(t=t||"default",t in this.instruments)return this.instruments[t];var r={name:t,play:o(n,e)};if(this.instruments[t]=r,"default"!==t){var a=i.instrument(n,t,e).then((function(t){return r.play=t.play,r}));this.promises.push(a),r.onready=function(t){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),a.then(t)}}else r.onready=function(t){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),t()};return r},i.loadBuffers=a,i.noteToMidi=r.midi,t.exports=i},dbf1:function(t,e,n){"use strict";n("19e7")},dec8:function(t,e,n){},e332:function(t,e,n){}});